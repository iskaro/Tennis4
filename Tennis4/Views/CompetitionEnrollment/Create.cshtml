@model Tennis4.Models.CompetitionEnrollment

@{
    ViewBag.Title = "Create";
}

<script>
    $(document).ready(function () {
        $("#row").prop("disabled", true);
        $("#competition").change(function () {
            if ($("#competition").val() != "") {
                var options = {};
                options.url = "/CompetitionEnrollmentController/GetRows";
                options.type = "POST";
                options.data = JSON.stringify({ competition: $("#competition").val() });
                options.dataType = "json";
                options.contentType = "application/json";
                options.success = function (listOfRows) {
                    $("#row").empty();
                    for (var i = 0; i < listOfRows.length; i++) {
                        $("#row").append("<option>" + listOfRows[i] + "</option>");
                    }
                    $("#row").prop("disabled", false);
                };
                options.error = function () { alert("Error retrieving rows!"); };
                $.ajax(options);
            }
            else {
                $("#row").empty();
                $("#row").prop("disabled", true);
            }
        });
    });
</script>



<h2>Create</h2>

@using (Html.BeginForm("Create", "CompetitionEnrollmentController", FormMethod.Post)) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal">
        <h4>CompetitionEnrollment</h4>
        <hr />
        @Html.ValidationSummary(true)

        <div class="form-group">
            @*@Html.LabelFor(model => model.PlayerID, "PlayerID", new { @class = "control-label col-md-2" })*@
            <div class="col-md-10">
                @Html.DropDownList("PlayerListID", string.Empty)
                @*@Html.ValidationMessageFor(model => model.PlayerID)*@
            </div>
        </div>

        <div class="form-group">
            @*@Html.LabelFor(model => model.CompetitionRow, "CompetitionRowID", new { @class = "control-label col-md-2" })*@
            Competiton Name
            <div class="col-md-10">
                @*@Html.DropDownList("CompetitionListID", String.Empty)*@
                @Html.DropDownList("CompetitionListID", ViewBag.CompetitionListID as SelectList, String.Empty)
                @*@Html.ValidationMessageFor(model => model.CompetitionRowID)*@
            </div>
        </div>

        <div>Select Row:</div>
        <select id="row"></select>
        <br /><br />
        @*<input type="submit" value="Submit" />*@

        @*<div class="form-group">
            @Html.LabelFor(model => model.CompetitionRowID, "CompetitionRowID", new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("CompetitionRowID", String.Empty)
                @Html.DropDownList("Row", new SelectList(string.Empty, "ID", "RowNumber"), string.Empty, new { style = "width:250px", @class = "dropdown1" })
                @Html.ValidationMessageFor(model => model.CompetitionRowID)
            </>
        </div>*@

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div>



<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>
